var database string

stream
    |from()
        .measurement('telemetry')
    @httpSideload()
        .field('range')
        .fieldType('double')
        .source('/api/management/zone/{database}/{sourceId}')
    |where(lambda: isPresent("distance") AND isPresent("range") AND "distance" <= "range")
    |window()
        .period(10s)
        .every(10s)
    @locationEngine()
    |influxDBOut()
        .database(database)
        .retentionPolicy('stream_rp')
        .measurement('locations')
