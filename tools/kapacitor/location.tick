var period_time = 10s
var every_time = 10s

var database string
var retention_policy = 'stream_rp'

stream
    |from()
        .measurement('telemetry')
    |where(lambda: "rssi" > -95)
    |window()
        .period(period_time)
        .every(every_time)
    |default()
        .field('rssi', -128.0)
    @locationEngine()
    |influxDBOut()
        .database(database)
        .retentionPolicy(retention_policy)
        .measurement('locations')